extends ../layout

block content
	#breadcrumbs.breadcrumbs
		script(type="text/javascript").
			try{ace.settings.check('breadcrumbs' , 'fixed')}catch(e){}
		ul.breadcrumb
			li.active
				i.ace-icon.fa.fa-home.home-icon
				| 主页
	.page-content
		include ./page
		.page-content-area
			.row
				.col-xs-12
					.page-header
						h1
							| 账单汇总
							small
								i.ace-icon.fa.fa-angle-double-right
								| 本月

				.col-sm-5
					.widget-box
						.widget-header.widget-header-flat.widget-header-small
							h5.widget-title
								i.ace-icon.fa.fa-signal
								| 收支账单
							.widget-toolbar.no-border
								.inline.dropdown-hover
									button.btn.btn-minier.btn-primary
										| 本月
										i.ace-icon.fa.fa-angle-down.icon-on-right.bigger-110
									ul.dropdown-menu.dropdown-menu-right.dropdown-125.dropdown-lighter.dropdown-close.dropdown-caret
										li.active
											a.blue(href='#')
												i.ace-icon.fa.fa-caret-right.bigger-110  
												| 本月
										li
											a(href='#')
												i.ace-icon.fa.fa-caret-right.bigger-110.invisible  
												| 上月
						.widget-body
							.widget-main
								#piechart-1
				.col-sm-5.col-sm-offset-2
					.widget-box
						.widget-header.widget-header-flat.widget-header-small
							h5.widget-title
								i.ace-icon.fa.fa-signal
								| 收支账单
							.widget-toolbar.no-border
								.inline.dropdown-hover
									button.btn.btn-minier.btn-primary
										| 本月
										i.ace-icon.fa.fa-angle-down.icon-on-right.bigger-110
									ul.dropdown-menu.dropdown-menu-right.dropdown-125.dropdown-lighter.dropdown-close.dropdown-caret
										li.active
											a.blue(href='#')
												i.ace-icon.fa.fa-caret-right.bigger-110  
												| 本月
										li
											a(href='#')
												i.ace-icon.fa.fa-caret-right.bigger-110.invisible  
												| 上月
						.widget-body
							.widget-main
								#piechart-2
								
	// if lte IE 8
		script(src="/libs/ace/js/excanvas.min.js")
	script(src="/libs/ace/js/jquery.easypiechart.min.js")
	script(src="/libs/ace/js/jquery.sparkline.min.js")
	script(src="/libs/ace/js/flot/jquery.flot.min.js")
	script(src="/libs/ace/js/flot/jquery.flot.pie.min.js")
	script(src="/libs/ace/js/flot/jquery.flot.resize.min.js")

	script(type="text/javascript").
		var piechart_1 = $('#piechart-1').css({'width':'90%' , 'min-height':'150px'});
		var piechart_2 = $('#piechart-2').css({'width':'90%' , 'min-height':'150px'});
		var data = [
			{ label: "social networks",  data: 38.7, color: "#68BC31"},
			{ label: "search engines",  data: 24.5, color: "#2091CF"},
			{ label: "ad campaigns",  data: 8.2, color: "#AF4E96"},
			{ label: "direct traffic",  data: 18.6, color: "#DA5430"},
			{ label: "other",  data: 10, color: "#FEE074"}
		];

		function drawPieChart(placeholder, data, position) {
			$.plot(placeholder, data, {
				series: {
					pie: {
						show: true,
						tilt:0.8,
						highlight: {
							opacity: 0.25
						},
						stroke: {
							color: '#fff',
							width: 2
						},
						startAngle: 2
					}	
				},
				legend: {
					show: true,
					position: position || "ne",
					labelBoxBorderColor: null,
					margin:[-30,15]
				},
				grid: {
					hoverable: true,
					clickable: true
					}
				})
			}

			drawPieChart(piechart_1, data);
			drawPieChart(piechart_2, data);


